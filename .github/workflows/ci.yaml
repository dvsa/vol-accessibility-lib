name: CI

on:
    pull_request:
 
jobs:
  security:
    name: Security
    uses: ./.github/workflows/security.yaml
    secrets: inherit
   
  build-maven:      
    - uses: whelk-io/maven-settings-xml-action@v22
      with:
        servers: '[{ "id":"github-vol-active-support", "configuration": { "httpHeaders": { "property": { "name":"Authorization", "value":"Bearer ${{ secrets.GITHUB_TOKEN }}"} } } } ]'
  
    - uses: ./.github/workflows/maven.yaml
      with:
        maven-goal: package
    needs: security


